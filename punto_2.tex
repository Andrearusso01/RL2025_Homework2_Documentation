Vision-based control

\begin{enumerate}
  \item We constructed a gazebo world, named \lstinline|empty.world|, inserting an aruco tag and detected it via the \lstinline|aruco_ros| package (link \href{https://github.com/pal-robotics/aruco_ros.git}{here}). With these lines we added the aruco tag:
\begin{lstlisting}[language=html]
     <include>
      <uri>
        model://aruco_tag
      </uri>
      <name>aruco_tag</name>
      <pose>0 -0.707 0.707 0 1.57 0</pose>
    </include>
\end{lstlisting}
  
Then we created a folder \lstinline|gazebo/models|, in the \lstinline|iiwa_description| package of the \lstinline|ros2_iiwa| stack, containing the aruco marker model for gazebo. 
 
We created a new model named \lstinline|aruco_tag| and imported it into a new Gazebo world as a static object in a position that is visible by the camera. Then we saved the new world into the \lstinline|/gazebo/worlds/|folder.
\newline This is the \lstinline|model.sdf| file:
  \begin{lstlisting}[language=html]
  <?xml version="1.0" encoding="UTF-8"?>
<sdf version='1.9'>
  <model name='aruco_tag'>
    <static>true</static>
    <link name='base_link'>
      <visual name='aruco_visual'>
        <geometry>
          <box>
            <size>0.1 0.1 0.01</size>
          </box>
        </geometry>
        <material>
          <diffuse>1 1 1 1</diffuse>
          <specular>0.4 0.4 0.4 1</specular>
          <pbr>
            <metal>
              <albedo_map>model://aruco_tag/aruco-20.png</albedo_map>
            </metal>
          </pbr>
        </material>
      </visual>
    </link>
  </model>
</sdf>
  \end{lstlisting}

And this is the code of our \lstinline|aruco_world|:
  \begin{lstlisting}[language=html]

<?xml version="1.0" ?>
<sdf version="1.4">
<world name="aruco_world">

<physics name="1ms" type="ignored">
    <max_step_size>0.001</max_step_size>
    <real_time_factor>1.0</real_time_factor>
    </physics>
    <plugin
      filename="ignition-gazebo-physics-system"
      name="gz::sim::systems::Physics">
    </plugin>
    <plugin
      filename="ignition-gazebo-user-commands-system"
      name="gz::sim::systems::UserCommands">
    </plugin>
    <plugin
      filename="ignition-gazebo-scene-broadcaster-system"
      name="gz::sim::systems::SceneBroadcaster">
    </plugin>
    <plugin
      filename="ignition-gazebo-contact-system"
      name="gz::sim::systems::Contact">
    </plugin>

    <light type="directional" name="sun">
      <cast_shadows>true</cast_shadows>
      <pose>0 0 10 0 0 0</pose>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.2 0.2 0.2 1</specular>
      <attenuation>
        <range>1000</range>
        <constant>0.9</constant>
        <linear>0.01</linear>
        <quadratic>0.001</quadratic>
      </attenuation>
      <direction>-0.5 0.1 -0.9</direction>
    </light>

    <model name="ground_plane">
      <static>true</static>
      <link name="link">
        <collision name="collision">
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
        </collision>
        <visual name="visual">
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <material>
            <ambient>0.8 0.8 0.8 1</ambient>
            <diffuse>0.8 0.8 0.8 1</diffuse>
            <specular>0.8 0.8 0.8 1</specular>
          </material>
        </visual>
      </link>
    </model>


<include>
  <uri>
    model://aruco_tag/
  </uri>
  <name>aruco_tag</name>
  <pose>-0.32 -0.83 0.43 2.54 1.57 3.14</pose>
</include>

<gravity>0 0 -9.81</gravity>

  </world>
</sdf>
  \end{lstlisting}

  
  
  
  
  


\end{enumerate}  

 

      
            
              
              
              